"use strict";Object.assign(mejs.MepDefaults,{markerColors:["#FF2D00","#3235FF"],markerWidth:1}),Object.assign(MediaElementPlayer.prototype,{markersAB:[null,null],nextModifiedMarker:0,buildabrepeat(e,t,r,s){let i=this,a=-1;for(let e=0,r=this.markersAB.length;e<r;e++){const r=document.createElement("span");r.className=`${i.options.classPrefix}time-marker`,r.style.background=i.options.markerColors[e]||"#E9BC3D",t.querySelector(`.${i.options.classPrefix}time-total`).appendChild(r),this.markersAB[e]=r}this.slider.addEventListener("contextmenu",(e=>{if(e.preventDefault(),this.nextModifiedMarker===this.markersAB.length)this.nextModifiedMarker=0,this.resetmarkers();else{const e=mejs.Utils.timeCodeToSeconds(this.timefloatcurrent.innerHTML);if(1===this.nextModifiedMarker){const t=this.markersAB[this.nextModifiedMarker-1];if(t.dataset&&t.dataset.timeValue&&this.getMarkerTime(t)>e)return}this.setmarker(e),this.nextModifiedMarker+=1}})),s.addEventListener("durationchange",(()=>{this.resetmarkers()})),s.addEventListener("timeupdate",(()=>{if(this.nextModifiedMarker!==this.markersAB.length)return;a=Math.floor(s.currentTime);const e=Math.floor(this.getMarkerTime(this.markersAB[1]));if(a===e){const e=Math.floor(this.getMarkerTime(this.markersAB[0]));this.setCurrentTime(e,!1),this.setCurrentRailHandle(e),this.updateCurrent(e)}}),!1)},getMarkerTime:e=>Number(e.dataset.timeValue),resetmarkers(){for(let e=0,t=this.markersAB.length;e<t;e++){const t=this.markersAB[e];t.style.width="0px",t.style.left="auto",t.dataset.timeValue=null,this.nextModifiedMarker=0}this.slider.dispatchEvent(new CustomEvent("resetmarkers"))},setmarker(e){const t=this.markersAB[this.nextModifiedMarker],r=100*Math.floor(e)/this.media.duration;t.style.width=this.options.markerWidth+"px",t.style.left=`${r}%`,t.dataset.timeValue=e,this.slider.dispatchEvent(new CustomEvent("setmarker",{detail:{marker:this.nextModifiedMarker,position:e}}))}});